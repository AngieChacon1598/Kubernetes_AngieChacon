server:
  port: ${PORT:8088}  # Valor por defecto si PORT no está configurado
  url: ${SERVER_URL:http://localhost:8088}  # Valor por defecto si SERVER_URL no está configurado

spring:
  application:
    name: webflux-ai
  
  # Configuración de MongoDB
  data:
    mongodb:
      uri: mongodb+srv://angiechacon:71491875@cluster0.nuwkm.mongodb.net/webflux-ai?retryWrites=true&w=majority&appName=Cluster0
      database: webflux-ai
      auto-index-creation: true
  
  # Configuración de R2DBC (PostgreSQL) - COMENTADA
  # r2dbc:
  #   url: r2dbc:postgresql://ep-rough-dream-a5jgv01u-pooler.us-east-2.aws.neon.tech/sql?sslmode=require
  #   username: db_owner
  #   password: CTtqXi6G2NFx
  #   #url: ${DATABASE_URL}
  #   #username: ${DATABASE_USERNAME}
  #   #password: ${DATABASE_PASSWORD}

  # Configuración del servidor web - COMENTADA (causaba duplicación de rutas)
  # webflux:
  #   base-path: /api/v1


# Configuración de las APIs de IA
ai:
  apis:
    language-identify:
      base-url: https://language-identify-detector.p.rapidapi.com/languageIdentify
      api-key: 7eed17039dmsh63431ac43f3bab8p1c600cjsn1eee5acffea8
      api-host: language-identify-detector.p.rapidapi.com
    jsearch:
      base-url: https://jsearch.p.rapidapi.com
      api-key: 7eed17039dmsh63431ac43f3bab8p1c600cjsn1eee5acffea8
      api-host: jsearch.p.rapidapi.com

# Configuración de logging
logging:
  level:
    root: INFO
    org.springframework: INFO
    org.springframework.r2dbc: DEBUG
    org.springframework.web.reactive.function.client: DEBUG
    com.vallegrande: DEBUG
    reactor: INFO
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# Configuración de manejo de errores
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: always
    metrics:
      enabled: true

# Configuración de SpringDoc (OpenAPI/Swagger)
springdoc:
  api-docs:
    enabled: true
    path: /api-docs
  swagger-ui:
    enabled: true
    path: /swagger-ui.html
